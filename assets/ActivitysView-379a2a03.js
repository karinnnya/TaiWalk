import{C as w,P as D,a as b,d as g,_ as v}from"./nofound80-b0b6492e.js";import{_ as P,h as M,m as k,a as A,r,o as i,c as n,b as t,d as c,w as m,v as H,F as p,e as V,f as B,g as h,t as f}from"./index-98feb353.js";const G={data(){return{paginatedDatas:[],filteredDatasCache:[],search:!1,selectedCategory:"",selectedCity:"",selectedValue:"",selectedData:"",keyword:"",onePage:21,currentPage:1,categories:[{name:"節慶活動",imgUrl:"https://images.unsplash.com/photo-1555589366-cd6c16cae4e9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80",value:"節慶活動"},{name:"自行車活動",imgUrl:"https://images.unsplash.com/photo-1510766461678-4a8420db04d2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80",value:"自行車活動"},{name:"遊憩活動",imgUrl:"https://images.unsplash.com/photo-1584672534914-50ac33ca00f7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=689&q=80",value:"遊憩活動"},{name:"產業文化",imgUrl:"https://images.unsplash.com/photo-1508367231051-dbfe726a5079?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&q=80",value:"產業文化活動"},{name:"年度活動",imgUrl:"https://images.unsplash.com/photo-1547619938-6b4be9b62a0b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",value:"年度活動"},{name:"四季活動",imgUrl:"https://images.unsplash.com/photo-1442458017215-285b83f65851?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80",value:"四季活動"}]}},components:{CityComponent:w,PageComponent:D,ActivitysComponent:M,CategoriesComponent:b},computed:{...k(g,["datas"]),pageCount(){return Math.ceil(this.filteredDatas().length/this.onePage)},pageNumbers(){const e=Math.min(this.pageCount,10),a=[],d=Math.max(1,this.currentPage-Math.floor(e/2)),u=Math.min(this.pageCount,d+e-1);for(let s=d;s<=u;s++)a.push(s);return a}},methods:{...A(g,["getActivitys"]),filteredDatas(){let e=[...this.datas];return this.selectedCategory&&(e=e.filter(a=>a.Class1===this.selectedCategory),this.currentPage=1),this.keyword&&(e=e.filter(a=>a.ActivityName.includes(this.keyword)),this.currentPage=1),e},handlePageClick(e){e==="prev"&&this.currentPage>1?this.currentPage--:e==="next"&&this.currentPage<this.pageCount?this.currentPage++:this.currentPage=e,this.$nextTick(()=>{window.scrollTo(0,0)}),this.updatePaginatedDatas()},handleCityChange(e){this.selectedCity=e},async searchDatas(e){this.search=!0,this.currentPage=1,this.selectedCategory=e,this.selectedCity?(await this.getActivitys(this.selectedCity),this.filteredDatasCache=this.filteredDatas(),this.updatePaginatedDatas()):(await this.getActivitys(),this.filteredDatasCache=this.filteredDatas(),this.updatePaginatedDatas())},updatePaginatedDatas(){const e=(this.currentPage-1)*this.onePage,a=e+this.onePage;this.paginatedDatas=this.filteredDatasCache.slice(e,a)}},mounted(){this.$route.query.keyword!==void 0&&this.searchDatas()}},N={class:"row gy-2 mb-3"},U={class:"col-12 col-lg-2"},q={class:"col-12 col-lg-2"},j=t("option",{value:""},"全部種類",-1),S=["value"],W={class:"col-12 col-lg-6"},Y={class:"col-12 col-lg-2"},T={key:0},F=t("h3",null,"熱門主題",-1),I={key:1},E={class:"fs-6"},L={key:0},z={class:"row g-3"},J={key:1,class:"text-center mt-4"},K=t("img",{src:v,alt:"nofound80",style:{width:"100px",margin:"0 auto"}},null,-1),O=t("h5",{class:"mt-3"},[h(" 目前查無資料 "),t("br"),h(" 請重新搜尋 ")],-1),Q=[K,O];function R(e,a,d,u,s,l){const C=r("CityComponent"),x=r("CategoriesComponent"),y=r("ActivitysComponent"),_=r("PageComponent");return i(),n(p,null,[t("div",N,[t("div",U,[c(C,{onCityChange:l.handleCityChange},null,8,["onCityChange"])]),t("div",q,[m(t("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=o=>s.selectedValue=o)},[j,(i(!0),n(p,null,V(s.categories,o=>(i(),n("option",{value:o.value,key:o.name},f(o.name),9,S))),128))],512),[[H,s.selectedValue]])]),t("div",W,[m(t("input",{class:"border rounded bg-light fs-5 px-3 py-1 w-100",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":a[1]||(a[1]=o=>s.keyword=o)},null,512),[[B,s.keyword,void 0,{trim:!0}]])]),t("div",Y,[t("button",{type:"button",class:"btn btn-primary fs-5 text-white w-100",onClick:a[2]||(a[2]=o=>l.searchDatas(this.selectedValue))}," 搜 尋 ")])]),s.search?(i(),n("div",I,[t("h3",null,[h(" 搜尋結果 "),t("span",E,"共 "+f(s.filteredDatasCache.length)+" 筆資料",1)]),s.paginatedDatas.length>0?(i(),n("div",L,[t("div",z,[c(y,{datas:s.paginatedDatas,columnClass:"col-12 col-md-4"},null,8,["datas"])]),c(_,{currentPage:s.currentPage,pageCount:l.pageCount,pageNumbers:l.pageNumbers,onPageClicked:l.handlePageClick},null,8,["currentPage","pageCount","pageNumbers","onPageClicked"])])):(i(),n("div",J,Q))])):(i(),n("div",T,[F,c(x,{categories:s.categories,onCategorySelected:l.searchDatas},null,8,["categories","onCategorySelected"])]))],64)}const $=P(G,[["render",R]]);export{$ as default};
