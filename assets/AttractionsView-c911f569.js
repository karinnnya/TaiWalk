import{C as _,P as y,a as b,d as g,_ as P}from"./nofound80-b0b6492e.js";import{_ as v,A as M,m as A,a as H,r as l,o as i,c as n,b as s,d as c,w as f,v as k,F as m,e as B,f as V,g as h,t as p}from"./index-98feb353.js";const G={data(){return{paginatedDatas:[],filteredDatasCache:[],search:!1,selectedCategory:"",selectedCity:"",selectedValue:"",selectedData:"",keyword:"",onePage:20,currentPage:1,categories:[{name:"自然風景類",imgUrl:"https://images.unsplash.com/photo-1566924443997-a2448e9c6f01?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80",value:"自然風景類"},{name:"觀光工廠類",imgUrl:"https://images.unsplash.com/photo-1624137308703-e1da1ca881df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",value:"觀光工廠類"},{name:"遊憩類",imgUrl:"https://images.unsplash.com/photo-1584672534914-50ac33ca00f7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=689&q=80",value:"遊憩類"},{name:"休閒農業類",imgUrl:"https://images.unsplash.com/photo-1461354464878-ad92f492a5a0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",value:"休閒農業類"},{name:"生態類",imgUrl:"https://images.unsplash.com/photo-1484704324500-528d0ae4dc7d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",value:"生態類"},{name:"溫泉類",imgUrl:"https://images.unsplash.com/photo-1603077864615-538e955d1ad1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=627&q=80",value:"溫泉類"},{name:"古蹟類",imgUrl:"https://images.unsplash.com/photo-1521379124646-d4fa8375b386?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1033&q=80",value:"古蹟類"}],datass:""}},components:{CityComponent:_,PageComponent:y,AttractionsComponent:M,CategoriesComponent:b},computed:{...A(g,["datas"]),pageCount(){return Math.ceil(this.filteredDatas().length/this.onePage)},pageNumbers(){const e=Math.min(this.pageCount,10),t=[],d=Math.max(1,this.currentPage-Math.floor(e/2)),u=Math.min(this.pageCount,d+e-1);for(let a=d;a<=u;a++)t.push(a);return t}},methods:{...H(g,["getAttractions"]),filteredDatas(){let e=[...this.datas];return this.selectedCategory&&(e=e.filter(t=>t.Class1===this.selectedCategory),this.currentPage=1),this.keyword&&(e=e.filter(t=>t.ScenicSpotName.includes(this.keyword)),this.currentPage=1),e},handlePageClick(e){e==="prev"&&this.currentPage>1?this.currentPage--:e==="next"&&this.currentPage<this.pageCount?this.currentPage++:this.currentPage=e,this.$nextTick(()=>{window.scrollTo(0,0)}),this.updatePaginatedDatas()},handleCityChange(e){this.selectedCity=e},async searchDatas(e){this.search=!0,this.currentPage=1,this.selectedCategory=e,this.selectedCity?(await this.getAttractions(this.selectedCity),this.filteredDatasCache=this.filteredDatas(),this.updatePaginatedDatas()):(await this.getAttractions(),this.filteredDatasCache=this.filteredDatas(),this.updatePaginatedDatas())},updatePaginatedDatas(){const e=(this.currentPage-1)*this.onePage,t=e+this.onePage;this.paginatedDatas=this.filteredDatasCache.slice(e,t)}},mounted(){this.$route.query.keyword!==void 0&&this.searchDatas()}},U={class:"row gy-2 mb-3"},q={class:"col-12 col-lg-2"},N={class:"col-12 col-lg-2"},S=s("option",{value:""},"全部種類",-1),j=["value"],W={class:"col-12 col-lg-6"},Y={class:"col-12 col-lg-2"},T={key:0},F=s("h3",null,"熱門主題",-1),I={key:1},E={class:"fs-6"},L={key:0,class:"mt-3"},z={key:1,class:"text-center mt-4"},J=s("img",{src:P,alt:"nofound80",style:{width:"100px",margin:"0 auto"}},null,-1),K=s("h5",{class:"mt-3"},[h(" 目前查無資料 "),s("br"),h(" 請重新搜尋 ")],-1),O=[J,K];function Q(e,t,d,u,a,r){const x=l("CityComponent"),C=l("CategoriesComponent"),D=l("AttractionsComponent"),w=l("PageComponent");return i(),n(m,null,[s("div",U,[s("div",q,[c(x,{onCityChange:r.handleCityChange},null,8,["onCityChange"])]),s("div",N,[f(s("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=o=>a.selectedValue=o)},[S,(i(!0),n(m,null,B(a.categories,o=>(i(),n("option",{value:o.value,key:o.name},p(o.name),9,j))),128))],512),[[k,a.selectedValue]])]),s("div",W,[f(s("input",{class:"border rounded bg-light fs-5 px-3 py-1 w-100",type:"text",placeholder:"你想去哪裡？請輸入關鍵字","onUpdate:modelValue":t[1]||(t[1]=o=>a.keyword=o)},null,512),[[V,a.keyword,void 0,{trim:!0}]])]),s("div",Y,[s("button",{type:"button",class:"btn btn-primary fs-5 text-white w-100",onClick:t[2]||(t[2]=o=>r.searchDatas(this.selectedValue))}," 搜 尋 ")])]),a.search?(i(),n("div",I,[s("h3",null,[h(" 搜尋結果 "),s("span",E,"共 "+p(a.filteredDatasCache.length)+" 筆資料",1)]),a.paginatedDatas.length>0?(i(),n("div",L,[c(D,{datas:a.paginatedDatas},null,8,["datas"]),c(w,{currentPage:a.currentPage,pageCount:r.pageCount,pageNumbers:r.pageNumbers,onPageClicked:r.handlePageClick},null,8,["currentPage","pageCount","pageNumbers","onPageClicked"])])):(i(),n("div",z,O))])):(i(),n("div",T,[F,c(C,{categories:a.categories,onCategorySelected:r.searchDatas},null,8,["categories","onCategorySelected"])]))],64)}const Z=v(G,[["render",Q]]);export{Z as default};
